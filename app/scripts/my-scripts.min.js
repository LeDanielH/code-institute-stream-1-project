angular.module("bandApp",["ngFitText","ngRoute","ngSanitize","ngAnimate","ngTouch","myBandAppControllers","myBandAppFilters","myBandAppDirectives","myBandAppServices","myBandAppAnimations"]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/home",{templateUrl:"templates/home.html",controller:"HomeController"}).when("/gigs",{templateUrl:"templates/gigs.html",controller:"GigsController"}).when("/store",{templateUrl:"templates/store.html",controller:"StoreController"}).when("/store/:itemId",{templateUrl:"templates/store-item-detail.html",controller:"StoreItemDetailController"}).when("/home/:postId",{templateUrl:"templates/blog-post-detail.html",controller:"BlogPostDetailController"}).otherwise({redirectTo:"/home"})}]),function(){"use strict";angular.module("myBandAppControllers",["myBandAppServices"]).controller("IndexController",["$scope","$location","$interval","IndexDataService","GigsDataService","StoreDataService","TestimonialsDataService","SocialLinksDataService","CallToActionDataService","FamousQuotesDataService",function(e,t,o,r,n,a,i,s,c,l){e.navlinks=r.nav.query(),e.mobileIcon={name:"menu"},e.subtitles=n.subtitles,e.maps=n.maps.query(),e.storeItems=a.storeItems.query(),e.sortByCategory=a.sortByCategory,e.sortByCategories=a.sortByCategories,e.images=i.images.query(),e.socialLinkstitle=s.title,e.socialIcons=s.socialIcons.query(),e.go=c.go,e.callToActionBoxes=c.callToActionBoxes.query(),e.fQuotes=l.quotes.query(),e.randomQuotes=e.fQuotes[Math.floor(Math.random()*e.fQuotes.length)]}])}(),function(){"use strict";angular.module("myBandAppControllers").controller("BlogPostDetailController",["$scope","BlogPostsDataService","FormsDataService","$routeParams",function(e,t,o,r){e.post=t.blogPosts.get({postId:r.postId},function(t){e.mainImageUrl=t.images[0]}),e.setMainImage=function(t){e.mainImageUrl=t},e.dateTime=o.getDateTime(),e.formsData=o.formsData.query(),e.addComment=function(){e.content&&""!==e.content&&(e.post.comments.push({userName:e.userName,content:e.content,upVotes:0,dateTime:e.dateTime}),e.userName="",e.content="",e.dateTime="")},e.upVote=t.upVote}])}(),function(){"use strict";angular.module("myBandAppControllers").controller("GigsController",["$scope","GigsDataService","FormsDataService",function(e,t,o){function r(t){e.maps=t,e.map=t[0]}e.title=t.title,e.maps=[],e.map=null,t.maps.query().$promise.then(r),e.formHeaders=o.formHeaders,e.introWarning=o.introWarning,e.formsData=o.formsData.query(),e.patterns=o.patterns,e.getYears=o.getYears(),e.getMonths=o.getMonths(),e.companions=[],e.addCompanion=function(){e.companion&&""!==e.companion&&(e.companions.push(e.companion),e.companion="")},e.removeCompanion=function(t){var o=e.companions.indexOf(t);e.companions.splice(o,1)},e.finalPrice=function(e,t){return e+e*t},e.guest=[],e.submitGuest=function(t){e.buyTicketForm.$valid?(e.guest.push({location:e.map,name:e.buyTicket.name,email:e.buyTicket.email,companions:e.companions,finalPrice:e.finalPrice,card:{name:e.card.name,number:e.card.email,cvv:e.card.cvv,month:e.card.month,year:e.card.year},billingAddress:{street:e.billingAddress.street,city:e.billingAddress.city,postCode:e.billingAddress.postCode,country:e.billingAddress.country}}),alert("Go to your email to see your purchase confirmation.")):alert("You've made a mistake somewhere, please check your form again.")},e.request=[],e.submitRequest=function(){e.bookUsForm.$valid?(e.request.push({name:e.bookUs.name,email:e.bookUs.email,gigType:e.gigType,gigAddress:{street:e.gigAddress.street,city:e.gigAddress.city,postCode:e.gigAddress.postCode,country:e.gigAddress.country},moreInfo:e.moreInfo,setHonorarium:e.honorarium}),alert("Please check your email for request confirmation.")):alert("You've made a mistake somewhere, please check your form again.")},e.honorarium=0,e.setHonorarium=function(){return e.honorarium}}])}(),function(){"use strict";angular.module("myBandAppControllers").controller("HomeController",["$scope","BlogPostsDataService",function(e,t){e.title=t.title,e.blogPosts=t.blogPosts.query()}])}(),function(){"use strict";angular.module("myBandAppControllers").controller("StoreItemDetailController",["$scope","StoreDataService","$routeParams",function(e,t,o){e.item=t.storeItems.get({itemId:o.itemId},function(t){e.mainImageUrl=t.images[0]}),e.setMainImage=function(t){e.mainImageUrl=t}}])}(),function(){"use strict";angular.module("myBandAppControllers").controller("StoreController",["$scope","StoreDataService",function(e,t){e.storeItemsList=t.storeItems.query(),e.sortByCategory=t.sortByCategory}])}(),function(){"use strict";angular.module("myBandAppServices",["ngResource"]).factory("IndexDataService",["$resource",function(e){var t={nav:e("data/json/:itemId.json",{},{query:{method:"GET",params:{itemId:"navbar"},isArray:!0}})};return t}])}(),function(){"use strict";angular.module("myBandAppServices").factory("BlogPostsDataService",["$resource",function(e){var t={title:"News",blogPosts:e("data/json/posts/:postId.json",{},{query:{method:"GET",params:{postId:"blog-posts"},isArray:!0}}),upVote:function(e){e.upVotes+=1}};return t}])}(),function(){"use strict";angular.module("myBandAppServices").factory("CallToActionDataService",["$resource","$location",function(e,t){var o={go:function(e){t.path(e)},callToActionBoxes:e("data/json/:itemId.json",{},{query:{method:"GET",params:{itemId:"calls-to-action"},isArray:!1}})};return o}])}(),function(){"use strict";angular.module("myBandAppServices").factory("FormsDataService",["$resource",function(e){var t={formsData:e("data/json/forms/:itemId.json",{},{query:{method:"GET",params:{itemId:"forms-data"},isArray:!1}}),patterns:{email:"/^\bw{1,30}\b(.\bw{1,30}\b)?@\b[a-zA-Z0-9]{1,30}\b.\b[a-zA-Z]{1,10}\b(.\b[a-zA-Z]{1,10}\b)?(s)?$/",card:"/^\b(d{4}(s|-)?){3}d{4}\b(s)?$/",cvv:"/^\bd{3}\b(s{0,1})?$/",name:"/^(\b[a-zA-Z]{1,20}\bs{0,2}){2,4}$/",street:"/^(\b[a-zA-Z]{1,20}\bs){1,3}\bd{1,5}\b(/\bd{1,5}\b)?(s{0,2})$/",city:"/^(\b[a-zA-Z]{1,20}\bs{0,2}){1,3}$/",postCode:"/^\b[a-zA-Z0-9]{2,12}\b$/",username:"/^\bw{2,30}\b$/"},getYears:function(){for(var e=new Date,t=e.getFullYear(),o=[],r=50,n=t;t+r>n;n++)o.push(n);return o},getMonths:function(){for(var e=[],t=1;13>t;t++)e.push(t);return e.map(function(e){return 10>e?"0"+e:e.toString()})},getDateTime:function(){var e=new Date,t=e.getDate(),o=("0"+(e.getMonth()+1)).slice(-2),r=e.getFullYear(),n=("0"+e.getHours()).slice(-2),a=("0"+e.getMinutes()).slice(-2),i=t+"/"+o+"/"+r+" "+n+":"+a;return i}};return t}])}(),function(){"use strict";angular.module("myBandAppServices").factory("FamousQuotesDataService",["$resource",function(e){var t={quotes:e("data/json/:itemId.json",{},{query:{method:"GET",params:{itemId:"fquotes"},isArray:!0}})};return t}])}(),function(){"use strict";angular.module("myBandAppServices").factory("GigsDataService",["$resource",function(e){var t={title:"gigs",locationTitle:"where",timeTitle:"when",maps:e("data/json/:itemId.json",{},{query:{method:"GET",params:{itemId:"gigs"},isArray:!0}})};return t}])}(),function(){"use strict";angular.module("myBandAppServices").factory("SocialLinksDataService",["$resource",function(e){var t={title:"follow us!",socialIcons:e("data/json/:itemId.json",{},{query:{method:"GET",params:{itemId:"social-links"},isArray:!0}})};return t}])}(),function(){"use strict";angular.module("myBandAppServices").factory("StoreDataService",["$resource",function(e){var t={storeItems:e("data/json/store-items/:itemId.json",{},{query:{method:"GET",params:{itemId:"store-items"},isArray:!0}}),sortByCategories:["popular","price"],sortByCategory:"price"};return t}])}(),function(){"use strict";angular.module("myBandAppServices").factory("TestimonialsDataService",["$resource",function(e){var t={images:e("data/json/:itemId.json",{},{query:{method:"GET",params:{itemId:"testimonials"},isArray:!0}})};return t}])}(),function(){"use strict";angular.module("myBandAppDirectives",[])}(),function(){"use strict";angular.module("myBandAppDirectives").directive("makeMap",function(){var e={restrict:"EA",templateUrl:"templates/directives/maps.html",scope:{map:"="},link:function(e,t,o){console.log("in map directive link")},controller:["$scope",function(e){e.$watch("map",function(){console.log("map directive controller watching map change",e.map)}),e.zoomIn=function(){e.map.zoom++},e.zoomOut=function(){e.map.zoom--},e.mapDimensions=function(){if(e.map.width)t=e.map.width;else var t=200;if(e.map.height)o=e.map.height;else var o=200;return t+"x"+o},e.returnAddressOrNot=function(){return console.log("address: "+e.map.address),!e.map.address},e.mapAddress=function(){var t=e.map.address[0].street,o=e.map.address[0].city,r=e.map.address[0].country;return t+", "+o+", "+r}}]};return e})}(),function(){"use strict";angular.module("myBandAppDirectives").directive("myDirective",function(){return{restrict:"AE",templateUrl:function(e,t){return t.templatePath}}})}(),function(){"use strict";angular.module("myBandAppDirectives").directive("testimonials",function(e){return{restrict:"AE",replace:!0,scope:{images:"="},link:function(t,o,r){t.currentIndex=0,t.direction="left",t.setCurrentSlideIndex=function(e){t.direction=e>t.currentIndex?"left":"right",t.currentIndex=e},t.loopDelay=5e3,t.loopCount=12,t.isCurrentSlideIndex=function(e){return t.currentIndex===e},t.previous=function(){t.direction="right",t.currentIndex=t.currentIndex>0?--t.currentIndex:t.images.length-1},t.next=function(){t.direction="left",t.currentIndex=t.currentIndex<t.images.length-1?++t.currentIndex:0};var n;t.loopSlider=function(){t.stopSlider(),n=e(t.next,t.loopDelay,t.loopCount)},t.stopSlider=function(){e.cancel(n)},t.resetSlider=function(){e.cancel(n),t.loopSlider()},t.loopSlider(),t.$on("$destroy",function(){e.cancel(n)})},templateUrl:"templates/directives/testimonials.html"}})}(),function(){"use strict";angular.module("myBandAppFilters",[])}(),function(){"use strict";angular.module("myBandAppFilters").filter("StockFilter",function(){var e="✓",t="✘";return function(o){return o>0?e:t}})}(),function(){"use strict";angular.module("myBandAppAnimations",[])}(),function(){"use strict";angular.module("myBandAppAnimations").animation(".testimonials-animation",function(){return{addClass:function(e,t,o){var r=e.scope(),n=angular.element(document.querySelectorAll(".slide-viewer"))[0].getBoundingClientRect().width;if("ng-hide"===t){var a=n;"right"!==r.direction&&(a=-a),TweenMax.to(e,.5,{left:a,onComplete:o})}else o()},removeClass:function(e,t,o){var r=e.scope(),n=angular.element(document.querySelectorAll(".slide-viewer"))[0].getBoundingClientRect().width;if("ng-hide"===t){e.removeClass("ng-hide");var a=n;"right"===r.direction&&(a=-a),TweenMax.set(e,{left:a}),TweenMax.to(e,.5,{left:0,onComplete:o})}else o()}}})}();